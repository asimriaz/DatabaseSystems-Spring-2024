<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 11.6.&nbsp; Exercises</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=learnsqlsvr05-CHP-11-SECT-5.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=learnsqlsvr05-APP-A.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><TR><td valign="top"><a name="learnsqlsvr05-CHP-11-SECT-6"></a>
<h3 id="title-IDADPVG4" class="docSection1Title">11.6. Exercises</H3><a name="IDX-CHP-11-0499"></a> 
<a name="IDX-CHP-11-0500"></a> 
<a name="IDX-CHP-11-0501"></a> 
<a name="IDX-CHP-11-0502"></a> 
<a name="IDX-CHP-11-0503"></a> 
<a name="IDX-CHP-11-0504"></a> 
<a name="IDX-CHP-11-0505"></a> 
<a name="IDX-CHP-11-0506"></a> 
<a name="IDX-CHP-11-0507"></a> 
<a name="IDX-CHP-11-0508"></a> 
<a name="IDX-CHP-11-0509"></a> 
<a name="IDX-CHP-11-0510"></a> 
<a name="IDX-CHP-11-0511"></a> 
<a name="IDX-CHP-11-0512"></a> 
<a name="IDX-CHP-11-0513"></a> 
<a name="IDX-CHP-11-0514"></a> 
<a name="IDX-CHP-11-0515"></a> 
<a name="IDX-CHP-11-0516"></a> 
<a name="IDX-CHP-11-0517"></a> 
<a name="IDX-CHP-11-0518"></a> 
<a name="IDX-CHP-11-0519"></a> 
<a name="IDX-CHP-11-0520"></a> 
<a name="IDX-CHP-11-0521"></a> 
<a name="IDX-CHP-11-0522"></a> 
<a name="IDX-CHP-11-0523"></a> 
<a name="IDX-CHP-11-0524"></a> 
<a name="IDX-CHP-11-0525"></a> 
<a name="IDX-CHP-11-0526"></a> 
<a name="IDX-CHP-11-0527"></a> 
<a name="IDX-CHP-11-0528"></a> 
<a name="IDX-CHP-11-0529"></a> 
<a name="IDX-CHP-11-0530"></a> 
<a name="IDX-CHP-11-0531"></a> 
<a name="IDX-CHP-11-0532"></a> 
<a name="IDX-CHP-11-0533"></a> 
<a name="IDX-CHP-11-0534"></a> 
<a name="IDX-CHP-11-0535"></a> 
<a name="IDX-CHP-11-0536"></a> 
<a name="IDX-CHP-11-0537"></a> 
<a name="IDX-CHP-11-0538"></a> 
<a name="IDX-CHP-11-0539"></a> 
<a name="IDX-CHP-11-0540"></a> 
<a name="IDX-CHP-11-0541"></a> 
<a name="IDX-CHP-11-0542"></a> 
<a name="IDX-CHP-11-0543"></a> 
<a name="IDX-CHP-11-0544"></a> 
<a name="IDX-CHP-11-0545"></a> 
<a name="IDX-CHP-11-0546"></a> 
<a name="IDX-CHP-11-0547"></a> 
<a name="IDX-CHP-11-0548"></a> 
<a name="IDX-CHP-11-0549"></a> 
<a name="IDX-CHP-11-0550"></a> 
<a name="IDX-CHP-11-0551"></a> 
<a name="IDX-CHP-11-0552"></a> 
<a name="IDX-CHP-11-0553"></a> 
<a name="IDX-CHP-11-0554"></a> 
<a name="IDX-CHP-11-0555"></a> 
<a name="IDX-CHP-11-0556"></a> 
<a name="IDX-CHP-11-0557"></a> 
<a name="IDX-CHP-11-0558"></a> 
<a name="IDX-CHP-11-0559"></a> 
<a name="IDX-CHP-11-0560"></a> 
<a name="IDX-CHP-11-0561"></a> 
<a name="IDX-CHP-11-0562"></a> 
<a name="IDX-CHP-11-0563"></a> 
<a name="IDX-CHP-11-0564"></a> 
<a name="IDX-CHP-11-0565"></a> 
<a name="IDX-CHP-11-0566"></a> 
<a name="IDX-CHP-11-0567"></a> 
<a name="IDX-CHP-11-0568"></a> 
<a name="IDX-CHP-11-0569"></a> 
<a name="IDX-CHP-11-0570"></a> 
<a name="IDX-CHP-11-0571"></a> 
<a name="IDX-CHP-11-0572"></a> 
<a name="IDX-CHP-11-0573"></a> 
<a name="IDX-CHP-11-0574"></a> 
<a name="IDX-CHP-11-0575"></a> 
<a name="IDX-CHP-11-0576"></a> 
<a name="IDX-CHP-11-0577"></a> 
<a name="IDX-CHP-11-0578"></a> 
<a name="IDX-CHP-11-0579"></a> 
<a name="IDX-CHP-11-0580"></a> 
<a name="IDX-CHP-11-0581"></a> 
<a name="IDX-CHP-11-0582"></a> 
<a name="IDX-CHP-11-0583"></a> 
<a name="IDX-CHP-11-0584"></a> 
<a name="IDX-CHP-11-0585"></a> 
<a name="IDX-CHP-11-0586"></a> 
<a name="IDX-CHP-11-0587"></a> 
<a name="IDX-CHP-11-0588"></a> 
<a name="IDX-CHP-11-0589"></a> 
<a name="IDX-CHP-11-0590"></a> 
<a name="IDX-CHP-11-0591"></a> 
<a name="IDX-CHP-11-0592"></a> 
<a name="IDX-CHP-11-0593"></a> 
<a name="IDX-CHP-11-0594"></a> 
<a name="IDX-CHP-11-0595"></a> 
<a name="IDX-CHP-11-0596"></a> 
<a name="IDX-CHP-11-0597"></a> 
<a name="IDX-CHP-11-0598"></a> 
<a name="IDX-CHP-11-0599"></a> 
<a name="IDX-CHP-11-0600"></a> 
<a name="IDX-CHP-11-0601"></a> 
<a name="IDX-CHP-11-0602"></a> 
<a name="IDX-CHP-11-0603"></a> 
<a name="IDX-CHP-11-0604"></a> 
<a name="IDX-CHP-11-0605"></a> 
<a name="IDX-CHP-11-0606"></a> 
<a name="IDX-CHP-11-0607"></a> 
<a name="IDX-CHP-11-0608"></a> 
<a name="IDX-CHP-11-0609"></a> 
<a name="IDX-CHP-11-0610"></a> 
<a name="IDX-CHP-11-0611"></a> 
<a name="IDX-CHP-11-0612"></a> 
<a name="IDX-CHP-11-0613"></a> 
<a name="IDX-CHP-11-0614"></a> 
<a name="IDX-CHP-11-0615"></a> 
<a name="IDX-CHP-11-0616"></a> 
<a name="IDX-CHP-11-0617"></a> 
<a name="IDX-CHP-11-0618"></a> 
<a name="IDX-CHP-11-0619"></a> 
<a name="IDX-CHP-11-0620"></a> 
<a name="IDX-CHP-11-0621"></a> 
<a name="IDX-CHP-11-0622"></a> 
<a name="IDX-CHP-11-0623"></a> 
<a name="IDX-CHP-11-0624"></a> 

<p class="docText">Unless specified otherwise, use the <tt>Student_course</tt> database to answer the following questions. Unless otherwise directed, name all <tt>CONSTRAINT</tt>s.</p>
<div style="font-weight:bold"><ol class="docList" type="1"><li><div style="font-weight:normal"><p class="docList">To test choices of data types, create a table with various data types like this:</P><pre>
CREATE TABLE Test3
  (name                VARCHAR(20),
   ssn                 CHAR(9),
   dept_number         INTEGER,
   acct_balance        SMALLMONEY)
</pre><br>
<p class="docList">Then insert values into the table to see what will and will not be accepted. The following data may or may not be acceptable. You are welcome to try other choices.</P><pre>
'xx','yy',2,5
'xx','yyy',2000000000,5
'xx','yyyy',2,1234567.89
</pre><br>
</div></LI><LI><div style="font-weight:normal"><p class="docList">Create an index of <tt>ssn</tt> in ascending order of <tt>ssn</tt>. TRy to insert some new data in the <tt>ssn</tt> column. Does your <tt>ssn</tt> column take nulls?</P><div style="font-weight:bold"><ol class="docList" type="a"><li><div style="font-weight:normal"><p class="docList">Does your <tt>ssn</tt> column take duplicates? If so, how can you prevent this column from taking duplicates?</P></div></LI><li><div style="font-weight:normal"><p class="docList">Include a <tt>NOT NULL</tt> constraint on the <tt>ssn</tt> column. Now try to insert some new data in the <tt>ssn</tt> column with nulls in the <tt>ssn</tt> column. What happens?</P></div></LI><li><div style="font-weight:normal"><p class="docList">With this <tt>NOT NULL</tt> constraint, is it necessary to include the <tt>PRIMARY KEY</tt> constraint? Why or why not? Now include the <tt>PRIMARY KEY</tt> constraint and see whether there is any difference in the types of values it accepts.</p></div></li><li><div style="font-weight:normal"><p class="docList">Include some data with null values in the <tt>dept_number</tt> and <tt>acct_balance</tt> columns. Now include the <tt>NOT NULL</tt> constraint in the <tt>acct_balance</tt> column. What happens?</P></div></li><li><div style="font-weight:normal"><p class="docList">Include the <tt>NOT NULL</tt> constraint in the <tt>acct_balance</tt> column. What happens?</P></div></LI></ol></div><p class="docList">Delete <tt>Test3</tt>.</P></div></li><li><div style="font-weight:normal"><p class="docList">To test the errors generated when <tt>NOT NULL</tt> is used, create a table called <tt>Test4</tt>, which looks like this:</p><pre>
CREATE TABLE Test4
  (a    CHAR(2)      NOT NULL,
   b    CHAR(3))
</pre><br>
<p class="docList">Input some data and try to enter a null value for <tt>A</tt>. Acceptable input data for a null is "null."</p></div></li><li><div style="font-weight:normal"><p class="docList">Create or recreate, if necessary, <tt>Test3</tt>, which does not specify a primary key. Populate the table with at least one duplicate <tt>ssn</tt>. Then, try to impose the <tt>PRIMARY KEY</tt> constraint with an <tt>ALTER TABLE</tt> command. What happens?</p><div style="font-weight:bold"><ol class="docList" type="a"><li><div style="font-weight:normal"><p class="docList">Recreate the <tt>Test3</tt> table, but this time add a primary key of <tt>ssn</tt>. If you still have the <tt>Test3</tt> table from Exercise 4, you may be able to delete <span class="docEmphasis">offending</span> rows and add the <tt>PRIMARY KEY</tt> constraint. Enter two more rows to your tableone containing a new <tt>ssn</tt> and one with a duplicate <tt>ssn</tt>. What happens?</p></div></li></ol></div></div></li><li><div style="font-weight:normal"><p class="docList">Create the <tt>Department</tt> and <tt>Employee</tt> tables, as per the examples earlier in the chapter, with all the constraints (<tt>PRIMARY KEY</tt>s, referential and <tt>UNIQUE</tt> constraints). You can add the constraints at create time or you can use <tt>ALTER TABLE</tt> to add the constraints. Populate the <tt>Department</tt> table first with departments 1, 2, and 3. Then populate the <tt>Employee</tt> table.</p><p class="docList">Note: before doing the next few exercises, it is prudent to create two tables, called <tt>Deptbak</tt> and <tt>Empbak</tt>, to contain the data you load, because you will be deleting, inserting, dropping, recreating, and so on. You can create <tt>Deptbak</tt> and <tt>Empbak</tt> tables (as temporary tables) with the data we have been using with a query like:</p><pre>
SELECT *
INTO Deptbak
FROM Dept
</pre><BR>
<p class="docList">Then, when you have added, deleted, updated, and so on and you want the original table from the start of this problem, you simply run the following commands:</p><pre>
DROP TABLE Dept
SELECT *
INTO Dept
FROM  Deptbak
</pre><br>
<div style="font-weight:bold"><ol class="docList" type="a"><LI><div style="font-weight:normal"><p class="docList">Create a violation of insertion integrity by adding an employee to a nonexistent department. What happens?</p></div></li><LI><div style="font-weight:normal"><p class="docList">Create an <tt>UPDATE</tt> violation by trying to change an existing employee to a nonexistent department, and then by trying to change a referenced department number.</p></div></li><LI><div style="font-weight:normal"><p class="docList">Try to delete a department for which there is an employee. What happens? What happens if you try to <tt>DELETE</tt> a department to which no employee has yet been assigned?</p></div></LI><li><div style="font-weight:normal"><p class="docList">Redo this entire experiment (starting with Exercise 5a), except that this time create the <tt>Employee</tt> table with the <tt>ON DELETE CASCADE</tt>. View the table definition of the <tt>Employee</tt> table.</P></div></LI><LI><div style="font-weight:normal"><p class="docList">Redo exercises 5a-5c, except that this time, create the <tt>Employee</tt> table with the <tt>ON DELETE NO ACTION</tt>.</P></div></li><LI><div style="font-weight:normal"><p class="docList">Redo exercises 5a-5c, except that this time, create the <tt>Employee</tt> table with the <tt>ON UPDATE CASCADE</tt>.</P></div></li><LI><div style="font-weight:normal"><p class="docList">Redo exercises 5a-5c, except that this time, create the <tt>Employee</tt> table with the <tt>ON UPDATE NO ACTION</tt>.</P></div></li><li><div style="font-weight:normal"><p class="docList">Redo exercises 5a-5c, except that this time, create the <tt>Employee</tt> table with the <tt>ON UPDATE NO ACTION</tt> and <tt>ON DELETE CASCADE</tt> together.</p></div></li></ol></div></div></LI><li><div style="font-weight:normal"><p class="docList">Create a table (your choice) with a <tt>PRIMARY KEY</tt> and a <tt>UNIQUE</tt> constraint. Insert data into the table and, as you do, enter a <span class="docEmphasis">good</span> row and a <span class="docEmphasis">bad</span> row (the <span class="docEmphasis">bad</span> row violates a constraint). Demonstrate a violation of each of your constraints one at a time. Show the successes and the errors as you receive them.</p></div></LI><LI><div style="font-weight:normal"><p class="docList">In this chapter, the <tt>Employee</tt> table was referenced to (depended on) the <tt>Department</tt> table. Suppose that there were another table that depended on the <tt>Employee</tt> table, such as <tt>Dependent</tt>, where the <tt>Dependent</tt> table contained the columns <tt>name</tt> and <tt>empnum</tt>. Create the <tt>Dependent</tt> table. Then add the referential constraint where <tt>empnum</tt> references the <tt>Employee</tt> table, with <tt>ON DELETE CASCADE</tt> (and note that the <tt>Employee</tt> table also has an <tt>ON DELETE CASCADE</tt> option). You are creating a situation in which the <tt>Dependent</tt> table references the <tt>Employee</tt> table, which references the <tt>Department</tt> table. Will SQL Server let you do this? If so, and if you delete a tuple from the <tt>Department</tt> table, will it cascade through the <tt>Employee</tt> table and on to the <tt>Dependent</tt> table?</P></div></li></ol></div>

</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=learnsqlsvr05-CHP-11-SECT-5.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=learnsqlsvr05-APP-A.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>